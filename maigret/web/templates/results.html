{% extends "base.html" %}
{% block content %}
<div class="form-container">
    <h1 class="mb-4">Processing Search</h1>
    
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-info">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <div class="text-center my-5">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-3">Processing your search request. Please wait...</p>
    </div>

    <script>
        // Check status every 2 seconds
        setInterval(function() {
            fetch(window.location.href)
                .then(response => {
                    if (response.redirected) {
                        window.location.href = response.url;
                    }
                });
        }, 2000);
    </script>
</div>
{% endblock %}